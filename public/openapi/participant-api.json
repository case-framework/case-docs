{
    "openapi": "3.1.0",
    "info": {
        "title": "Participant API",
        "version": "1.0.0",
        "description": "Endpoints for participant authentication, user management, and study interactions."
    },
    "paths": {
        "/": {
            "get": {
                "summary": "Health check",
                "operationId": "getHealth",
                "tags": [
                    "misc"
                ],
                "responses": {
                    "200": {
                        "description": "Service is healthy",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HealthStatus"
                                },
                                "examples": {
                                    "ok": {
                                        "value": {
                                            "status": "ok"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/auth/login": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Login with email and password",
                "operationId": "loginWithEmail",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "instanceId": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "email",
                                    "password",
                                    "instanceId"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Access and refresh tokens with user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "token": {
                                            "$ref": "#/components/schemas/TokenEnvelope"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "token",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/signup": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Sign up with email",
                "operationId": "signupWithEmail",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "instanceId": {
                                        "type": "string"
                                    },
                                    "infoCheck": {
                                        "type": "string"
                                    },
                                    "preferredLanguage": {
                                        "type": "string"
                                    },
                                    "withAttributes": {
                                        "type": "object",
                                        "properties": {
                                            "type": {
                                                "type": "string"
                                            },
                                            "attributes": {
                                                "type": "object",
                                                "additionalProperties": true
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "email",
                                    "password",
                                    "instanceId"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Access and refresh tokens with user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "token": {
                                            "$ref": "#/components/schemas/TokenEnvelope"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "token",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "429": {
                        "$ref": "#/components/responses/Error429"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/login-with-temptoken": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Login using a temporary token (optionally with password or access token)",
                "operationId": "loginWithTempToken",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                             "schema": {
                                "type": "object",
                                "properties": {
                                    "tempToken": {
                                        "type": "string"
                                    },
                                    "accessToken": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "tempToken"
                                ],
                                "additionalProperties": false,
                                "description": "Provide either accessToken or password along with tempToken."
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Access and refresh tokens with user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "token": {
                                            "$ref": "#/components/schemas/TokenEnvelopeWithLastOTP"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "token",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/temptoken-info": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Get info for a temporary token",
                "operationId": "getTempTokenInfo",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "instanceId": {
                                        "type": "string"
                                    },
                                    "tempToken": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "instanceId",
                                    "tempToken"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Info returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "userID": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email"
                                        }
                                    },
                                    "required": [
                                        "userID",
                                        "email"
                                    ],
                                    "additionalProperties": false
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/token/renew": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Renew access token",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "renewToken",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {                               
                                "type": "object",
                                "properties": {
                                    "refreshToken": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "refreshToken"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Access and refresh tokens with user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "token": {
                                            "$ref": "#/components/schemas/TokenEnvelopeWithLastOTP"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "token",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/token/validate": {
            "get": {
                "tags": [
                    "auth"
                ],
                "summary": "Validate access token",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "validateToken",
                "responses": {
                    "200": {
                        "description": "Token valid",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "tokenInfos": {
                                            "type": "object",
                                            "description": "Decoded participant user JWT claims",
                                            "additionalProperties": true
                                        }
                                    },
                                    "required": [
                                        "tokenInfos"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    }
                }
            }
        },
        "/v1/auth/token/revoke": {
            "get": {
                "tags": [
                    "auth"
                ],
                "summary": "Revoke refresh tokens for user",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "revokeTokens",
                "responses": {
                    "200": {
                        "description": "Revoked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Message"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/resend-email-verification": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Resend email verification",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "resendEmailVerification",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "required": [
                                    "email"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "429": {
                        "$ref": "#/components/responses/Error429"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/verify-email": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Verify email by token",
                "operationId": "verifyEmail",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/logout": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Logout user (invalidate current session)",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "User logged out",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "tokensRevoked": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "tokensRevoked"
                                    ],
                                    "additionalProperties": false
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/otp": {
            "get": {
                "tags": [
                    "auth"
                ],
                "summary": "Request OTP (email by default)",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "requestOTP",
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "email",
                                "sms"
                            ],
                            "default": "email"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/auth/otp/verify": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Verify OTP code",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "verifyOTP",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "code": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "code"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Access and refresh tokens with user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "token": {
                                            "$ref": "#/components/schemas/TokenEnvelopeWithLastOTP"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "token",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/password-reset/initiate": {
            "post": {
                "tags": ["password"],
                "summary": "Initiate password reset",
                "operationId": "initiatePasswordReset",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "instanceID": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "email",
                                    "instanceID"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "429": {
                        "$ref": "#/components/responses/Error429"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/password-reset/get-infos": {
            "post": {
                "tags": ["password"],
                "summary": "Get info for a password reset token",
                "operationId": "getPasswordResetInfos",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Account ID returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "accountId": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "accountId"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/password-reset/reset": {
            "post": {
                "tags": ["password"],
                "summary": "Reset password",
                "operationId": "resetPassword",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    },
                                    "newPassword": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "token",
                                    "newPassword"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/studies/": {
            "get": {
                "tags": ["study service studies"],
                "summary": "List studies by status",
                "operationId": "getStudiesByStatus",
                "parameters": [
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "studies": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "key": {
                                                        "type": "string"
                                                    },
                                                    "status": {
                                                        "type": "string"
                                                    },
                                                    "props": {
                                                        "type": "object",
                                                        "additionalProperties": true
                                                    },
                                                    "stats": {
                                                        "type": "object",
                                                        "additionalProperties": true
                                                    }
                                                },
                                                "required": [
                                                    "key",
                                                    "status",
                                                    "props",
                                                    "stats"
                                                ]
                                            }
                                        }
                                    },
                                    "required": [
                                        "studies"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/studies/{studyKey}": {
            "get": {
                "tags": ["study service studies"],
                "summary": "Get study by key",
                "operationId": "getStudy",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "study": {
                                            "type": "object",
                                            "properties": {
                                                "key": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "props": {
                                                    "type": "object",
                                                    "additionalProperties": true
                                                },
                                                "stats": {
                                                    "type": "object",
                                                    "additionalProperties": true
                                                }
                                            },
                                            "required": [
                                                "key",
                                                "status",
                                                "props",
                                                "stats"
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/studies/{studyKey}/code-lists/has-code": {
            "get": {
                "tags": ["study service studies"],
                "summary": "Check if a code exists in a code list",
                "operationId": "studyHasCodeListCode",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "listKey",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "code",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "exists": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "exists"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },       
        "/v1/study-service/studies/{studyKey}/code-lists/available-count": {
            "get": {
                "tags": ["study service studies"],
                "summary": "Count available codes in a code list",
                "operationId": "getStudyCodeListAvailableCount",
                "parameters": [
                {
                    "name": "studyKey",
                    "in": "path",
                    "required": true,
                    "schema": { "type": "string" }
                },
                {
                    "name": "listKey",
                    "in": "query",
                    "required": true,
                    "schema": { "type": "string" }
                },
                {
                    "name": "instanceID",
                    "in": "query",
                    "required": true,
                    "schema": { "type": "string" }
                }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "availableCount": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "availableCount"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/studies/{studyKey}/variables": {
            "get": {
                "tags": ["study service studies"],
                "summary": "List variables for a study",
                "operationId": "getStudyVariables",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "variables": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/StudyVariables"
                                            }
                                        }
                                    },
                                    "required": [
                                        "variables"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                        },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/studies/{studyKey}/variables/{variableKey}": {
            "get": {
                "tags": ["study service studies"],
                "summary": "Get a study variable",
                "operationId": "getStudyVariable",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "variableKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "variable": {
                                            "$ref": "#/components/schemas/StudyVariables"
                                        }
                                    },
                                    "required": [
                                        "variable"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                        },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/studies/participating": {
            "get": {
                "tags": ["study service studies"],
                "summary": "List studies the user participates in",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getParticipatingStudies",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "studies": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/StudyInfo"
                                            }
                                        }
                                    },
                                    "required": [
                                        "studies"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/events/{studyKey}/enter": {
            "post": {
                "tags": ["study service events"],
                "summary": "Enter a study",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "enterStudy",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileID": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "profileID"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/events/{studyKey}/custom": {
            "post": {
                "tags": ["study service events"],
                "summary": "Trigger a custom study event",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "customStudyEvent",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "eventKey": {
                                        "type": "string"
                                    },
                                    "profileID": {
                                        "type": "string"
                                    },
                                    "payload": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                },
                                "required": [
                                    "eventKey",
                                    "profileID"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/events/{studyKey}/submit": {
            "post": {
                "tags": ["study service events"],
                "summary": "Submit survey response",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "submitSurveyEvent",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileID": {
                                        "type": "string"
                                    },
                                    "response": {
                                        "type": "object",
                                        "description": "SurveyResponse",
                                        "additionalProperties": true
                                    }
                                },
                                "required": [
                                    "profileID",
                                    "response"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/events/{studyKey}/leave": {
            "post": {
                "tags": ["study service events"],
                "summary": "Leave a study",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "leaveStudyEvent",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileID": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "profileID"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/events/{studyKey}/merge-temporary-participant": {
            "post": {
                "tags": ["study service events"],
                "summary": "Merge temporary participant into user profile",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "mergeTempParticipant",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileID": {
                                        "type": "string"
                                    },
                                    "temporaryParticipantID": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "profileID",
                                    "temporaryParticipantID"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys of participant returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/events/{studyKey}/merge-virtual-participant": {
            "post": {
                "tags": ["study service events"],
                "summary": "Merge a virtual participant into user profile by linking code",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "mergeVirtualParticipant",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileID": {
                                        "type": "string"
                                    },
                                    "virtualParticipantID": {
                                        "type": "string"
                                    },
                                    "linkingCodeKey": {
                                        "type": "string"
                                    },
                                    "linkingCodeValue": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "profileID",
                                    "virtualParticipantID",
                                    "linkingCodeKey",
                                    "linkingCodeValue"
                                ],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys of merged participant returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/surveys": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get assigned surveys for profiles",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getAssignedSurveys",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pids",
                        "in": "query",
                        "required": true,
                        "description": "Comma-separated profile IDs",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Assigned surveys with survey infos returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AssignedSurveysWithInfos"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/survey/{surveyKey}": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get a specific survey with context",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getSurveyWithContext",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "surveyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": true,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Survey with context returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "surveyWithContext": {
                                            "$ref": "#/components/schemas/AssignedSurveyWithContext"
                                        }
                                    },
                                    "required": [
                                        "surveyWithContext"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                        },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/participant-state": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get participant state",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getParticipantState",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": true,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Participant state returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "participant": {
                                            "$ref": "#/components/schemas/Participant"
                                        }
                                    },
                                    "required": [
                                        "participant"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/linking-code": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get a linking code by key",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getLinkingCode",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": true,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "key",
                        "in": "query",
                        "required": true,
                        "description": "Key for linking code",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Linking code returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "linkingCode": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "linkingCode"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/responses": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get survey responses for a profile",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getStudyResponsesForProfile",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": false,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "surveyKey",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "page number (starting from 1)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "default": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "maximum number of responses per page",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "default": 10
                        }
                    },
                    {
                        "name": "filter",
                        "in": "query",
                        "description": "bson.M object to filter responses",
                        "schema": {
                            "type": "object",
                             "additionalProperties": {
                                "type": "object"
                             }
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "bson.M object to sort responses",
                        "schema": {
                            "type": "object",
                             "additionalProperties": {
                                "type": "object"
                             }
                        }
                    },
                    {
                        "name": "shortKeys",
                        "in": "query",
                        "description": "whether to return short keys for responses",
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "questionOptionSep",
                        "in": "query",
                        "description": "character used to seperate slot keys in response",
                        "schema": {
                            "type": "string",
                            "default": "-"
                        }
                    },
                    {
                        "name": "format",
                        "in": "query",
                        "description": "format for survey responses",
                        "schema": {
                            "type": "string",
                            "default": "wide",
                            "enum": ["wide", "long", "json"]
                        }
                    },
                    {
                        "name": "extraContextColumns",
                        "in": "query",
                        "description": "comma-separated list of extra context columns to include in the response",
                        "schema": {
                            "type": "string"
                        }
                    }

                ],
                "responses": {
                    "200": {
                        "description": "Responses returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "responses": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "description": "Responses",
                                                "additionalProperties": {
                                                    "type": "object"
                                                }
                                            }
                                        },
                                        "pagination": {
                                            "$ref": "#/components/schemas/PaginationInfos"
                                        }
                                    },
                                    "required": [
                                        "responses",
                                        "pagination"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/confidential-response": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get confidential responses by key",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getConfidentialResponse",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": true,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "key",
                        "in": "query",
                        "required": true,
                        "description": "Key for confidential responses",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Confidential responses returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "confidentialResponse": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "description": "Confidential survey response export entry",
                                                "additionalProperties": true
                                            }
                                        }
                                    },
                                    "required": [
                                        "confidentialResponse"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/submission-history": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get submission history for profiles",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getSubmissionHistory",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pids",
                        "in": "query",
                        "required": true,
                        "description": "Comma-separated profile IDs",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "description": "Maximum number of submissions per page",
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Submission history returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "submissionHistory": {
                                            "$ref": "#/components/schemas/SubmissionHistory"
                                        }
                                    },
                                    "required": [
                                        "submissionHistory"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/reports": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get reports for a profile",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getReports",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": true,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "page number (starting from 1)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "default": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "maximum number of reports per page",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "default": 10
                        }
                    },
                    {
                        "name": "filter",
                        "in": "query",
                        "description": "bson.M object to filter reports",
                        "schema": {
                            "type": "object",
                             "additionalProperties": {
                                "type": "object"
                             }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reports returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "reports": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Report"
                                            }
                                        },
                                        "pagination": {
                                            "$ref": "#/components/schemas/PaginationInfos"
                                        }
                                    },
                                    "required": [
                                        "reports",
                                        "pagination"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/temp-participant/register": {
            "post": {
                "tags": ["study service events"],
                "summary": "Register a temporary participant",
                "operationId": "registerTempParticipant",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "instanceId": {
                                        "type": "string"
                                    },
                                    "studyKey": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "instanceId",
                                    "studyKey"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Temporary participant returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "participant": {
                                            "$ref": "#/components/schemas/Participant"
                                        }
                                    },
                                    "required": [
                                        "participant"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/temp-participant/surveys": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get assigned surveys for a temporary participant",
                "operationId": "getTempParticipantSurveys",
                "parameters": [
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "studyKey",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": true,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Assigned surveys with survey infos returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AssignedSurveysWithInfos"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/temp-participant/survey": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get a survey with context for a temporary participant",
                "operationId": "getTempParticipantSurveyWithContext",
                "parameters": [
                    {
                        "name": "instanceID",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "studyKey",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "surveyKey",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pid",
                        "in": "query",
                        "required": false,
                        "description": "Profile ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Survey with context returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "surveyWithContext": {
                                            "$ref": "#/components/schemas/AssignedSurveyWithContext"
                                        }
                                    },
                                    "required": [
                                        "surveyWithContext"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/temp-participant/submit-response": {
            "post": {
                "tags": ["study service events"],
                "summary": "Submit a survey response for a temporary participant",
                "operationId": "submitTempParticipantResponse",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "instanceId": {
                                        "type": "string"
                                    },
                                    "studyKey": {
                                        "type": "string"
                                    },
                                    "pid": {
                                        "type": "string"
                                    },
                                    "response": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                },
                                "required": [
                                    "instanceId",
                                    "studyKey",
                                    "pid",
                                    "response"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Assigned surveys returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "assignedSurveys": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AssignedSurvey"
                                            }
                                        }
                                    },
                                    "required": [
                                        "assignedSurveys"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/virtual-participants/{studyKey}/": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Get virtual participants by linking code",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getVirtualParticipantsByLinkingCode",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "key",
                        "in": "query",
                        "required": true,
                        "description": "Linking code key",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "value",
                        "in": "query",
                        "required": true,
                        "description": "Linking code value",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Participants returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "participants": {
                                            "type": "array",
                                            "items": {
                                            "$ref": "#/components/schemas/Participant"
                                            }
                                        }
                                    },
                                    "required": [
                                        "participants"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/files": {
            "post": {
                "tags": ["study service participant data"],
                "summary": "Upload participant file",
                "security": [ { "BearerAuth": [] } ],
                "operationId": "uploadParticipantFile",
                "parameters": [
                    {
                        "name": "studyKey",
                        "in": "path",
                        "required": true,
                        "schema": { "type": "string" }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                       "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileID": {
                                    "type": "string",
                                    "description": "ID of the profile"
                                    },
                                    "file": {
                                    "type": "string",
                                    "format": "binary",
                                    "description": "File to upload. Only 'image/jpeg' and 'image/png' are allowed."
                                    }
                                },
                                "required": ["profileID", "file"]
                            },
                            "encoding": {
                                "file": {
                                    "contentType": [
                                    "image/jpeg",
                                    "image/png"
                                    ]
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "File uploaded",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string", "description": "object ID of the uploaded file" },
                                        "path": { "type": "string" },
                                        "status": { "type": "string", "const": "ready" }
                                    },
                                    "required": ["id", "path", "status"],
                                    "additionalProperties": false
                                }
                            }
                        }
                    },
                    "400": { "$ref": "#/components/responses/Error400" },
                    "401": { "$ref": "#/components/responses/Error401" },
                    "403": { "$ref": "#/components/responses/Error403" },
                    "500": { "$ref": "#/components/responses/Error500" }
                }
            },
            "get": {
                "tags": ["study service participant data"],
                "summary": "List participant files",
                "security": [ { "BearerAuth": [] } ],
                "operationId": "listParticipantFiles",
                "parameters": [
                    { "name": "studyKey", "in": "path", "required": true, "schema": { "type": "string" } },
                    { "name": "pid", "in": "query", "required": true, "description": "Profile ID", "schema": { "type": "string" } },
                    { "name": "page", "in": "query", "description": "page number (starting from 1)", "schema": { "type": "integer", "minimum": 1, "default": 1 } },
                    { "name": "limit", "in": "query", "description": "maximum number of files per page", "schema": { "type": "integer", "minimum": 1, "default": 10 } }
                ],
                "responses": {
                    "200": {
                        "description": "Files returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "fileInfos": { "type": "array", "items": { "$ref": "#/components/schemas/FileInfo" } },
                                        "pagination": { "$ref": "#/components/schemas/PaginationInfos" }
                                    },
                                    "required": ["fileInfos", "pagination"],
                                    "additionalProperties": false
                                }
                            }
                        }
                    },
                    "400": { "$ref": "#/components/responses/Error400" },
                    "401": { "$ref": "#/components/responses/Error401" },
                    "500": { "$ref": "#/components/responses/Error500" }
                }
            }
        },
        "/v1/study-service/participant-data/{studyKey}/files/{fileID}": {
            "get": {
                "tags": ["study service participant data"],
                "summary": "Download participant file",
                "security": [ { "BearerAuth": [] } ],
                "operationId": "getParticipantFile",
                "parameters": [
                    { "name": "studyKey", "in": "path", "required": true, "schema": { "type": "string" } },
                    { "name": "fileID", "in": "path", "required": true, "schema": { "type": "string" } },
                    { "name": "pid", "in": "query", "required": true, "description": "Profile ID", "schema": { "type": "string" } }
                ],
                "responses": {
                    "200": {
                        "description": "File",
                        "content": {
                            "application/octet-stream": {
                                "schema": { "type": "string", "format": "binary" }
                            }
                        }
                    },
                    "400": { "$ref": "#/components/responses/Error400" },
                    "401": { "$ref": "#/components/responses/Error401" },
                    "404": { "$ref": "#/components/responses/Error404" },
                    "500": { "$ref": "#/components/responses/Error500" }
                }
            },
            "delete": {
                "tags": ["study service participant data"],
                "summary": "Delete participant file",
                "security": [ { "BearerAuth": [] } ],
                "operationId": "deleteParticipantFile",
                "parameters": [
                    { "name": "studyKey", "in": "path", "required": true, "schema": { "type": "string" } },
                    { "name": "fileID", "in": "path", "required": true, "schema": { "type": "string" } },
                    { "name": "pid", "in": "query", "required": true, "description": "Profile ID", "schema": { "type": "string" } }
                ],
                "responses": {
                    "200": { "description": "Deleted", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Message" } } } },
                    "400": { "$ref": "#/components/responses/Error400" },
                    "401": { "$ref": "#/components/responses/Error401" },
                    "404": { "$ref": "#/components/responses/Error404" },
                    "500": { "$ref": "#/components/responses/Error500" }
                }
            }
        },
        "/v1/user/": {
            "get": {
                "tags": ["user"],
                "summary": "Get current user",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getUser",
                "responses": {
                    "200": {
                        "description": "User returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            },
            "delete": {
                "tags": ["user"],
                "summary": "Delete current user",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "deleteUser",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "exitSurveyResponse": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                     "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            }
        },
        "/v1/user/preferred-language": {
            "put": {
                "summary": "Update the account's preferred language",
                "tags": ["user"],
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "updatePreferredLanguage",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "newLocale": { "type": "string", "description": "language code, e.g., en, de-DE" }
                                },
                                "required": ["newLocale"],
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                     "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            }
        },
        "/v1/user/profiles": {
            "post": {
                "tags": ["user"],
                "summary": "Add new profile",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "addProfile",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profile": {
                                        "$ref": "#/components/schemas/Profile"
                                    }
                                },
                                "required": [
                                    "profile"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile added",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "profile": {
                                            "$ref": "#/components/schemas/Profile"
                                        }
                                    },
                                    "required": [
                                        "profile"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            },
            "put": {
                "tags": ["user"],
                "summary": "Update profile",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "updateProfile",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profile": {
                                        "$ref": "#/components/schemas/Profile"
                                    }
                                },
                                "required": [
                                    "profile"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "profile": {
                                            "$ref": "#/components/schemas/Profile"
                                        }
                                    },
                                    "required": [
                                        "profile"
                                    ]
                                }
                            }
                        }
                    },
                   "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            }
        },
        "/v1/user/profiles/remove": {
            "post": {
                "tags": ["user"],
                "summary": "Remove a profile",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "removeProfile",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "profileId": {
                                        "type": "string"
                                    },
                                    "exitSurveyResponse": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                },
                                "required": [
                                    "profileId"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                   "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            }
        },
        "/v1/user/password": {
            "post": {
                "tags": ["user"],
                "summary": "Change password",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "changePassword",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "oldPassword": {
                                        "type": "string"
                                    },
                                    "newPassword": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "oldPassword",
                                    "newPassword"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"   
                    }
                }
            }
        },
        "/v1/user/change-account-email": {
            "post": {
                "tags": ["user"],
                "summary": "Change account email",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "changeAccountEmail",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "email",
                                    "password"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                         },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/user/change-phone-number": {
            "post": {
                "tags": ["user"],
                "summary": "Change phone number",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "changePhoneNumber",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "newPhoneNumber": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "newPhoneNumber",
                                    "password"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "429": {
                        "$ref": "#/components/responses/Error429"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/user/request-phone-number-verification": {
            "get": {
                "tags": ["user"],
                "summary": "Request phone number verification code via SMS",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "requestPhoneNumberVerification",
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "429": {
                        "$ref": "#/components/responses/Error429"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/user/attributes": {
            "get": {
                "tags": ["user"],
                "summary": "Get user attributes",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "getUserAttributes",
                "responses": {
                    "200": {
                        "description": "Attributes returned",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "attributes": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/UserAttributes"
                                            }
                                        }
                                    },
                                    "required": [
                                        "attributes"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            },
            "post": {
                "tags": ["user"],
                "summary": "Create or update a user attribute",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "setUserAttribute",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "type": {
                                        "type": "string"
                                    },
                                    "attributes": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                },
                                "required": [
                                    "type",
                                    "attributes"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                        },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/user/attributes/{attributeID}": {
            "delete": {
                "tags": ["user"],
                "summary": "Delete a user attribute",
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "operationId": "deleteUserAttribute",
                "parameters": [
                    {
                        "name": "attributeID",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "401": {
                        "$ref": "#/components/responses/Error401"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        },
        "/v1/user/contact-preferences": {
            "put": {
                "tags": ["user"],
                "summary": "Update contact preferences",
                "description": "Update the user's newsletter and weekly subscription preferences.",
                "security": [
                    { "BearerAuth": [] }
                ],
                "operationId": "updateContactPreferences",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                             "schema": {
                                "type": "object",
                                "properties": {
                                    "subscribedToNewsletter": {
                                        "type": "boolean"
                                    },
                                    "toggleWeeklySubscription": {
                                        "type": "boolean"
                                    }
                                },
                                "required": [
                                    "subscribedToNewsletter",
                                    "toggleWeeklySubscription"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": { "$ref": "#/components/responses/MessageOk"},
                    "400": { "$ref": "#/components/responses/Error400" },
                    "401": { "$ref": "#/components/responses/Error401" },
                    "500": { "$ref": "#/components/responses/Error500" }
                }
            }
        },
        "/v1/unsubscribe-newsletter": {
            "post": {
                "tags": ["misc"],
                "summary": "Unsubscribe user from newsletter (via token)",
                "operationId": "unsubscribeNewsletter",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/MessageOk"
                    },
                    "400": {
                        "$ref": "#/components/responses/Error400"
                    },
                    "500": {
                        "$ref": "#/components/responses/Error500"
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "BearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        },
        "responses": {
            "MessageOk": {
                "description": "Generic OK message",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Message"
                        }
                    }
                }
            },
            "Error400": {
                "description": "Bad request",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "Error401": {
                "description": "Unauthorized",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "Error403": {
                "description": "Forbidden",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "Error404": {
                "description": "Not Found",
                "content": {
                    "application/json": {
                        "schema": {
                        "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "Error429": {
                "description": "Too many requests",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "Error500": {
                "description": "Internal Server Error",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            }
        },
        "schemas": {
            "HealthStatus": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string"
                    }
                },
                "required": [
                    "status"
                ],
                "additionalProperties": false
            },
            "Message": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "message"
                ],
                "additionalProperties": false
            },
            "Error": {
                "type": "object",
                "properties": {
                    "error": {
                        "type": "string"
                    }
                },
                "required": [
                    "error"
                ],
                "additionalProperties": false
            },
            "TokenEnvelope": {
                "type": "object",
                "properties": {
                    "accessToken": {
                        "type": "string"
                    },
                    "refreshToken": {
                        "type": "string"
                    },
                    "expiresIn": {
                        "type": "number"
                    },
                    "selectedProfile": {
                        "type": "string"
                    }
                },
                "required": [
                    "accessToken",
                    "refreshToken",
                    "expiresIn",
                    "selectedProfile"
                ],
                "additionalProperties": false
            },
            "TokenEnvelopeWithLastOTP": {
                "type": "object",
                "properties": {
                    "accessToken": {
                        "type": "string"
                    },
                    "refreshToken": {
                        "type": "string"
                    },
                    "expiresIn": {
                        "type": "number"
                    },
                    "selectedProfile": {
                        "type": "string"
                    },
                    "lastOTP": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "integer"
                        }
                    }
                },
                "required": [
                    "accessToken",
                    "refreshToken",
                    "expiresIn",
                    "selectedProfile",
                    "lastOTP"
                ],
                "additionalProperties": false
            },
            "AssignedSurvey": {
                "type": "object",
                "description": "Assigned survey object",
                "additionalProperties": true
            },
            "AssignedSurveysWithInfos": {
                "type": "object",
                "description": "Assigned surveys object with survey infos",
                "properties": {
                    "surveys": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "surveyInfos": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                },
                "required": [
                    "surveys",
                    "surveyInfos"
                ],
                "additionalProperties": false
            },
            "AssignedSurveyWithContext": {
                "type": "object",
                "description": "Assigned survey object with optional context and prefill survey response",
                "properties": {
                    "survey": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "context": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "prefill": {
                        "type": "object",
                        "additionalProperties": true
                    }
                },
                "required": [
                    "survey"
                ],
                "additionalProperties": false
            },
            "FileInfo": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "ObjectID"
                    },
                    "participantID": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "uploadedBy": {
                        "type": "string"
                    },
                    "path": {
                        "type": "string"
                    },
                    "previewPath": {
                        "type": "string"
                    },
                    "submittedAt": {
                        "type": "integer"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "fileType": {
                        "type": "string"
                    },
                    "visibleToParticipant": {
                        "type": "boolean"
                    },
                    "size": {
                        "type": "integer"
                    }
                },
                "required": [
                    "id",
                    "participantID",
                    "path",
                ],
                "additionalProperties": false,
                "description": "File Info object"
            },
            "PaginationInfos": {
                "type": "object",
                "description": "Pagination information",
                "properties": {
                "totalCount": {
                    "type": "integer"
                },
                "currentPage": {
                    "type": "integer"
                },
                "totalPages": {
                    "type": "integer"
                },
                "pageSize": {
                    "type": "integer"
                }
                },
                "additionalProperties": false
            },
            "SubmissionHistory": {
                "type": "object",
                "description": "Submission history",
                "additionalProperties": true
            },
            "Report": {
                "type": "object",
                "description": "Report object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "MongoDB ObjectID as hex string"
                    },
                    "key": {
                        "type": "string"
                    },
                    "participantID": {
                        "type": "string"
                    },
                    "responseID": {
                        "type": "string"
                    },
                    "timestamp": {
                        "type": "integer",
                        "description": "Unix timestamp"
                    },
                    "modifiedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "key": { "type": "string" },
                                "value": { "type": "string" },
                                "dtype": { 
                                    "type": "string", 
                                    "enum": ["date", "float", "int", "string", "rawMessage", "keyList"]
                                }
                            },
                            "additionalProperties": false
                        }
                    }
                },
                "required": [
                    "key",
                    "participantID",
                    "timestamp"
                ],
                "additionalProperties": false
            },
            "Participant": {
                "type": "object",
                "description": "Participant defines the datamodel for current state of the participant in a study as stored in the database",
                "additionalProperties": true
            },
            "User": {
                "type": "object",
                "description": "User object",
                "additionalProperties": true
            },
            "Profile": {
                "type": "object",
                "description": "User profile object",
                "additionalProperties": true
            },
            "UserAttributes": {
                "type": "object",
                "description": "User attributes object",
                "additionalProperties": true
            },
            "StudyInfo": {
                "type": "object",
                "properties": {
                    "key": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "props": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "stats": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "profileIds": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "ProfileIDs only required in study info objects related to participants"
                    }
                },
                "required": [
                    "key",
                    "status",
                    "props",
                    "stats",
                    "profileIds"
                ],
                "additionalProperties": false
            },
            "StudyVariables": {
                "type": "object",
                "properties": {
                "id": {
                    "type": "string",
                    "description": "MongoDB ObjectID",
                    "example": "64e4b2f2c2a4e2b1a1c2d3e4"
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "configUpdatedAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "valueUpdatedAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "studyKey": {
                    "type": "string"
                },
                "key": {
                    "type": "string"
                },
                "value": {
                    "description": "Value of the study variable, type depends on 'type'",
                    "oneOf": [
                    { "type": "string" },
                    { "type": "integer" },
                    { "type": "number", "format": "float" },
                    { "type": "boolean" },
                    { "type": "string", "format": "date-time" }
                    ]
                },
                "type": {
                    "type": "string",
                    "enum": ["string", "int", "float", "boolean", "date"]
                },
                "label": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "uiType": {
                    "type": "string"
                },
                "uiPriority": {
                    "type": "integer"
                },
                "configs": {
                    "type": "object",
                    "additionalProperties": true
                }
                },
                "required": [
                "createdAt",
                "configUpdatedAt",
                "valueUpdatedAt",
                "studyKey",
                "key",
                "value",
                "type"
                ]
            },
        }
    },
    "tags": [
        {
            "name": "auth",
            "description": "Authentication endpoints"
        },
        {
            "name": "password",
            "description": "Password endpoints"
        },
         {
            "name": "study service events",
            "description": "Study service events endpoints"
        },
         {
            "name": "study service participant data",
            "description": "Endpoints getting participant data in study service"
        },
         {
            "name": "study service studies",
            "description": "Endpoints getting study data in study service"
        },
        {
            "name": "user",
            "description": "User endpoints"
        },
        {
            "name": "misc",
            "description": "Miscellaneous"
        }
    ]
}